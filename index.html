<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>✨ Minimalist QR Pro Generator</title>
<script src="https://cdn.jsdelivr.net/npm/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
/* Reset & base */
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Inter',sans-serif; background:#f2f4f8; display:flex; flex-direction:column; align-items:center; min-height:100vh; padding:50px; color:#1c1c1e; }

/* Title */
h1 { font-weight:600; font-size:2rem; margin-bottom:40px; text-align:center; }

/* Layout */
.container { display:flex; flex-wrap:wrap; justify-content:center; gap:40px; width:100%; max-width:1200px; }
.card { background:white; border-radius:24px; padding:30px; box-shadow:0 16px 40px rgba(0,0,0,0.08); transition:0.5s; position:relative; }
.card:hover { transform: translateY(-5px); box-shadow:0 24px 60px rgba(0,0,0,0.12); }

/* Controls */
.controls { flex:1; min-width:350px; display:flex; flex-direction:column; gap:20px; }
input[type=text], input[type=color], select, input[type=file], button { padding:12px 18px; font-size:1rem; border-radius:14px; border:1px solid #ccc; outline:none; background:#fafafa; transition:0.3s; }
input[type=text]:focus, select:focus, input[type=color]:focus { border-color:#4caf50; box-shadow:0 0 8px rgba(76,175,80,0.2); }
button { background:#4caf50; color:white; border:none; cursor:pointer; transition:0.3s; }
button:hover { background:#45a049; transform: translateY(-2px); }

/* Labels */
label { font-weight:600; font-size:0.9rem; margin-top:5px; }

/* Preview */
.preview { flex:1; min-width:350px; display:flex; flex-direction:column; align-items:center; gap:15px; }
#qr-container { margin-top:10px; border-radius:20px; padding:20px; background:white; box-shadow:0 12px 32px rgba(0,0,0,0.06); transition: all 0.4s ease; }

/* Download Buttons */
.download-buttons { display:flex; gap:15px; flex-wrap:wrap; justify-content:center; margin-top:10px; }
.download-buttons button { flex:1; min-width:130px; }

/* Gradient preview live */
.gradient-preview { width:100%; height:10px; border-radius:10px; margin-top:-10px; transition:0.4s; }

/* History */
.history { margin-top:50px; width:100%; max-width:700px; }
.history h2 { font-weight:600; margin-bottom:15px; }
.history-list { display:flex; flex-wrap:wrap; gap:15px; }
.history-item { width:90px; height:90px; overflow:hidden; border-radius:18px; cursor:pointer; transition:0.3s; border:1px solid #ddd; }
.history-item:hover { transform:scale(1.1); box-shadow:0 8px 20px rgba(0,0,0,0.08); }
.history-item img { width:100%; height:100%; object-fit:contain; }

/* Floating panels & smooth animation */
.card { position:relative; overflow:hidden; }
.card::before { content:""; position:absolute; top:-50%; left:-50%; width:200%; height:200%; background:linear-gradient(120deg,#ff7e5f,#feb47b,#86a8e7,#91eae4); filter:blur(90px); opacity:0.2; transform:translate(0,0); transition:0.8s; pointer-events:none; border-radius:50%; }
.card:hover::before { transform:translate(20px,20px); opacity:0.3; }

/* Responsive */
@media(max-width:900px){ .container { flex-direction:column; align-items:center; } }
</style>
</head>
<body>

<h1>✨ Minimalist QR Pro Generator</h1>

<div class="container">
  <!-- Controls Panel -->
  <div class="card controls">
    <label>Enter Text or URL</label>
    <input type="text" id="text" placeholder="https://example.com">

    <label>Foreground Color</label>
    <input type="color" id="fgColor" value="#000000">

    <label>Background Color</label>
    <input type="color" id="bgColor" value="#ffffff">

    <label>Gradient (optional, comma-separated)</label>
    <input type="text" id="gradient" placeholder="#ff7e5f,#feb47b,#86a8e7">

    <div class="gradient-preview" id="gradientPreview"></div>

    <label>Template</label>
    <select id="template">
      <option value="rounded">Rounded Dots</option>
      <option value="classic">Classic Squares</option>
      <option value="dots">Dots + Gradient</option>
    </select>

    <label>Upload Logo/Icon</label>
    <input type="file" id="logoInput" accept="image/*">

    <button id="generate">Generate QR Code</button>
  </div>

  <!-- Preview Panel -->
  <div class="card preview">
    <div id="qr-container"></div>
    <div class="download-buttons">
      <button id="download-png">Download PNG</button>
      <button id="download-svg">Download SVG</button>
    </div>
  </div>
</div>

<!-- History -->
<div class="history card">
  <h2>History</h2>
  <div class="history-list" id="historyList"></div>
</div>

<script>
  // Initialize QR Code
  let qrCode = new QRCodeStyling({
    width: 300, height: 300, data: "", 
    dotsOptions: { color:"#000000", type:"rounded" },
    cornersSquareOptions: { type:"extra-rounded", color:"#000000" },
    cornersDotOptions: { type:"dot", color:"#000000" },
    backgroundOptions: { color:"#ffffff" },
    imageOptions: { crossOrigin:"anonymous", margin:5 }
  });

  const qrContainer = document.getElementById("qr-container");
  qrCode.append(qrContainer);

  const gradientPreview = document.getElementById("gradientPreview");
  const gradientInput = document.getElementById("gradient");
  gradientInput.addEventListener("input", ()=>{
    gradientPreview.style.background = `linear-gradient(90deg, ${gradientInput.value})`;
  });

  // History
  const historyList = document.getElementById("historyList");
  let history = JSON.parse(localStorage.getItem("qrHistory")) || [];

  function updateHistory(){
    historyList.innerHTML="";
    history.slice(-5).reverse().forEach(item=>{
      const div=document.createElement("div");
      div.classList.add("history-item");
      const img=document.createElement("img");
      img.src=item;
      div.appendChild(img);
      div.onclick=()=>qrCode.update({data:item});
      historyList.appendChild(div);
    });
  }
  updateHistory();

  function saveHistory(dataURL){
    history.push(dataURL);
    localStorage.setItem("qrHistory", JSON.stringify(history.slice(-20)));
    updateHistory();
  }

  document.getElementById("generate").addEventListener("click", ()=>{
    const text = document.getElementById("text").value;
    if(!text){alert("Enter text or URL!"); return;}
    const fg = document.getElementById("fgColor").value;
    const bg = document.getElementById("bgColor").value;
    const grad = document.getElementById("gradient").value;
    const template = document.getElementById("template").value;
    const logoFile = document.getElementById("logoInput").files[0];

    let dotsType="rounded";
    if(template==="classic") dotsType="classy-rounded";
    if(template==="dots") dotsType="dots";

    let options = {
      data:text,
      dotsOptions:{ color:fg, type:dotsType },
      cornersSquareOptions:{ type:"extra-rounded", color:fg },
      cornersDotOptions:{ type:"dot", color:fg },
      backgroundOptions:{ color:bg }
    };

    if(grad){
      const stops=grad.split(",").map((c,i)=>({offset:i,color:c}));
      options.dotsOptions.gradient={ type:"linear", rotation:45, colorStops:stops };
    }

    if(logoFile){
      const reader=new FileReader();
      reader.onload=function(e){
        options.image=e.target.result;
        qrCode.update(options);
        saveHistory(qrCode.getRawDataURL());
      }
      reader.readAsDataURL(logoFile);
    } else {
      qrCode.update(options);
      saveHistory(qrCode.getRawDataURL());
    }
  });

  document.getElementById("download-png").addEventListener("click", ()=> qrCode.download({name:"qr-code", extension:"png"}));
  document.getElementById("download-svg").addEventListener("click", ()=> qrCode.download({name:"qr-code", extension:"svg"}));
</script>
</body>
</html>
